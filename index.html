<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Unity Call Me – Pollinations Phone Bridge</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="page">
      <header class="page__header">
        <h1>Unity Call Me</h1>
        <p>
          Launch a fully automated Pollinations-powered voice call that greets you, pauses for your replies,
          and keeps the Unity model in the loop for conversational follow ups. Configure your call, press the
          button, and Twilio will ring the phone number you provide.
        </p>
      </header>

      <section class="panel" aria-labelledby="configuration-heading">
        <div class="panel__header">
          <h2 id="configuration-heading">Call configuration</h2>
          <p id="credentials-warning" role="status" aria-live="polite"></p>
        </div>
        <form id="call-form" class="form-grid">
          <label class="field">
            <span>Destination phone number</span>
            <input id="phone-number" name="phone-number" type="tel" required placeholder="+15551234567" autocomplete="tel">
          </label>

          <label class="field">
            <span>Initial context / request</span>
            <textarea id="call-context" name="call-context" rows="3" placeholder="Tell Unity what you want to talk about"></textarea>
          </label>

          <label class="field">
            <span>Pollinations chat model</span>
            <select id="model-select" name="model" required></select>
          </label>

          <label class="field">
            <span>Voice model</span>
            <select id="voice-select" name="voice" required></select>
          </label>

          <label class="field">
            <span>Silence detect threshold (seconds)</span>
            <input id="silence-threshold" name="silence" type="number" min="1" max="20" value="6" step="1">
          </label>

          <label class="field">
            <span>No-input timeout (seconds)</span>
            <input id="no-input-timeout" name="no-input" type="number" min="2" max="60" value="12" step="1">
          </label>

          <label class="field field--wide">
            <span>Unity system prompt</span>
            <textarea id="system-prompt" rows="4" placeholder="Customize how Unity should behave on this call"></textarea>
          </label>

          <div class="actions">
            <button id="call-button" type="submit" class="primary" disabled>Call me</button>
            <button id="reset-button" type="reset">Reset</button>
          </div>
        </form>
      </section>

      <section class="panel" aria-labelledby="status-heading">
        <div class="panel__header">
          <h2 id="status-heading">Live status</h2>
        </div>
        <div class="status-board">
          <div>
            <span class="status-label">Connection</span>
            <span id="status-indicator" class="status-indicator status-indicator--idle">Awaiting configuration</span>
          </div>
          <div>
            <span class="status-label">Selected Pollinations model</span>
            <span id="selected-model">—</span>
          </div>
          <div>
            <span class="status-label">Selected voice</span>
            <span id="selected-voice">—</span>
          </div>
        </div>
        <div class="log">
          <h3>Event log</h3>
          <ol id="event-log"></ol>
        </div>
      </section>

      <section class="panel" aria-labelledby="preview-heading">
        <div class="panel__header">
          <h2 id="preview-heading">Unity call plan preview</h2>
        </div>
        <div class="preview-grid">
          <label class="field">
            <span>Planned speaking segments</span>
            <textarea id="call-plan" readonly rows="8"></textarea>
          </label>
          <label class="field">
            <span>Generated TwiML</span>
            <textarea id="twiml-preview" readonly rows="8"></textarea>
          </label>
        </div>
      </section>
    </main>

    <script id="app-config">window.__APP_CONFIG__ = window.__APP_CONFIG__ || {};</script>
    <script type="module" src="app.js"></script>
  </body>
</html>
